# HOMEWORK.md

## 提出物一覧

- `HOMEWORK.md`：課題の要件・分析・考察のまとめ（本ファイル）
- `questions.json`：独自に作成した質問と参照資料のペア
- `results.md`：各質問に対するRAGなし・RAGあり回答の比較表
- `ai_engineering_03_T4_work.ipynb`：実験用Jupyter Notebook（コード一式）

---

## 1. 質問設計の観点と意図

- **幅広い情報要求**を意識し、事実系（イヌの平均寿命、富士山の標高）、時事系（2024年オリンピック）、比較系（イヌとネコの違い）、個人情報系（私の仕事内容）をバランスよく設計。
- **RAGの有効性検証**のため、「私の現在の仕事内容は？」のように、LLM単体では絶対に回答できない質問も含めた。
- **参照資料**は各質問に対して1対1で用意し、情報の明瞭性とRAG効果の検証を重視。

---

## 2. RAGの実装方法と工夫点

- **プロンプト設計**：「[参考資料]…[質問]…」の形で、参照資料を明示的に与え、モデルが資料を根拠として回答するよう誘導。
- **質問ごとに対応資料を個別投入**：ノイズを減らし、RAGのピュアな効果を観察。
- **ベースライン（RAGなし）との比較**：同じ質問をRAGなし・ありで実施し、差異を明確に可視化。

---

## 3. 評価指標（RAGなし・RAGあり両方）

| 質問                       | モード   | 正確性(0-5) | 完全性(0-5) | 関連性(0-5) | コメント                                                                                           |
|----------------------------|----------|-------------|-------------|-------------|----------------------------------------------------------------------------------------------------|
| イヌの平均寿命             | RAGなし  | 5           | 5           | 5           | ほぼ正確な回答                                                                                     |
| イヌの平均寿命             | RAGあり  | 5           | 5           | 5           | 参照資料通りの回答で一貫性あり                                                                     |
| 2024年オリンピック開催地   | RAGなし  | 5           | 5           | 5           | 正確                                                                                            |
| 2024年オリンピック開催地   | RAGあり  | 5           | 5           | 5           | 資料に忠実                                                                                         |
| イヌとネコの主な違い       | RAGなし  | 4           | 4           | 5           | 情報量多いがやや冗長                                                                              |
| イヌとネコの主な違い       | RAGあり  | 4           | 4           | 5           | 資料から要点抽出、簡潔                                                                            |
| 富士山の標高               | RAGなし  | 5           | 5           | 5           | 正確                                                                                            |
| 富士山の標高               | RAGあり  | 5           | 5           | 5           | 正確                                                                                            |
| 私の現在の仕事内容         | RAGなし  | 0           | 0           | 0           | 回答不可                                                                                           |
| 私の現在の仕事内容         | RAGあり  | 5           | 5           | 5           | 資料の内容を反映                                                                                   |

---

## 4. 結果の分析と考察

### RAGによって改善したケース

- **個人情報や未知の情報**（「私の現在の仕事内容」）は、RAGなしでは回答不能だが、RAGありでは参照資料に基づき的確に回答できた。
- **時事・最新情報**（2024年オリンピック）も、学習データの範囲外だった場合でも資料があれば正確に回答できる。
- **比較や要点抽出**（イヌとネコの違い）では、RAGは資料から主要なポイントを抜き出し、簡潔な回答となった。

### RAGの効果が限定的なケース

- **一般常識・広く知られている事実**（イヌの平均寿命、富士山の標高）は、RAGなしでも正確な回答が得られ、RAGの有無による差は小さい。
- **RAGなしの方が情報量が多い場合も**（イヌとネコの違い）：RAGなしでは知識ベースから多様な情報を生成するが、RAGありは資料の要点に限定されるため、網羅性は資料次第。

### RAGの限界と課題

- **資料の品質・網羅性がそのまま回答の質に直結**：資料が不十分だとRAG回答も不十分になる。
- **資料の内容に「引きずられ」やすい**：間違った資料を与えれば、誤答をそのまま出すリスクがある。
- **複数資料やノイズ情報が混在する場合**：適切な情報選択やリランキング、意味的チャンク化などの工夫が必要。

---

## 5. 発展的な改善案

- **複数資料の同時投入＋リランキング**：関連性の高い情報だけを抜き出して回答する手法。
- **意味的チャンク化**：文脈や段落単位で資料を分割し、より自然な情報単位で検索・回答する。
- **ノイズ混入実験**：関連性の低い資料を混ぜ、RAGの情報選択精度を評価。
- **自動評価の導入**：LLMによる自己評価や、スコアリング関数を用いた自動判定。

---

## 6. まとめ

- **RAGは「資料にしかない情報」「最新情報」「個人情報」など、LLM単体では答えられない問いに強い効果を発揮**する。
- **一方で、一般常識や広く知られている事実では、RAGの有無による差は小さい**。資料が不十分な場合やノイズが多い場合は、RAGの効果が減少・悪化することもある。
- **RAGの効果は「資料設計」「検索・選択精度」「プロンプト設計」に大きく依存**する。
- **今後は、資料の品質管理や意味的チャンク化、リランキングなどの応用手法を組み合わせることで、さらなる性能向上が期待できる**。
